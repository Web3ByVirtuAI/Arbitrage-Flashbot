# AWS EC2 T2 Micro Production Environment Configuration
# Flash Loan Arbitrage Bot - Optimized for Free Tier

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# AWS EC2 Specific Settings
AWS_REGION=us-east-1
INSTANCE_TYPE=t2.micro

# Memory optimization for 1GB RAM
NODE_OPTIONS=--max-old-space-size=512
PM2_MAX_MEMORY_RESTART=400M

# ============================================
# TRADING WALLET CONFIGURATION
# ============================================
# SECURITY WARNING: Never commit these values to git!
# Generate with: node scripts/setup-wallet.js

PRIVATE_KEY=your_wallet_private_key_here
PUBLIC_ADDRESS=your_wallet_address_here
NETWORK=mainnet
CHAIN_ID=1

# Wallet funding requirements for AWS deployment:
# Minimum 0.1 ETH for gas fees
# Recommended 0.5 ETH for active trading
# Monitor balance regularly due to gas costs

# ============================================
# RPC CONFIGURATION (Critical for AWS)
# ============================================
# Primary RPC (Alchemy recommended for reliability)
ETHEREUM_RPC_URL=https://eth-mainnet.alchemyapi.io/v2/YOUR-ALCHEMY-API-KEY

# Backup RPC (Infura as fallback)
BACKUP_RPC_URL=https://mainnet.infura.io/v3/YOUR-INFURA-PROJECT-ID

# Additional backup RPC (recommended for production)
BACKUP_RPC_2=https://ethereum.blockpi.network/v1/rpc/public
BACKUP_RPC_3=https://eth-rpc.gateway.pokt.network

# RPC Settings optimized for T2 micro
RPC_TIMEOUT=30000
RPC_RETRY_COUNT=3
RPC_RETRY_DELAY=1000

# ============================================
# DEX ROUTER ADDRESSES
# ============================================
# Ethereum Mainnet Router Addresses
UNISWAP_V2_ROUTER=0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D
UNISWAP_V3_ROUTER=0xE592427A0AEce92De3Edee1F18E0157C05861564
UNISWAP_V3_QUOTER=0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6

SUSHISWAP_ROUTER=0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9F
SHIBASWAP_ROUTER=0x03f7724180AA6b939894B5Ca4314783B0b36b329

# Additional DEXs for arbitrage opportunities
PANCAKESWAP_ETH_ROUTER=0xEfF92A263d31888d860bD50809A8D171709b7b1c
CURVE_ROUTER=0x8e764bE4288B842791989DB5b8ec067279829809

# ============================================
# FLASH LOAN CONFIGURATION
# ============================================
# Aave V3 Pool Address (Ethereum Mainnet)
AAVE_POOL_ADDRESS=0x87870Bca3F3fD6335C3F4ce8392D69350B4fA4E2
AAVE_POOL_DATA_PROVIDER=0x7B4EB56E7CD4b454BA8ff71E4518426369a138a3

# Flash loan parameters optimized for T2 micro
MIN_PROFIT_THRESHOLD=0.005
MAX_FLASH_LOAN_AMOUNT=100
FLASH_LOAN_FEE=0.0009

# ============================================
# GAS CONFIGURATION (AWS Optimized)
# ============================================
# Conservative gas settings for consistent execution
GAS_PRICE_LIMIT=30
MAX_GAS_LIMIT=500000
GAS_PRICE_MULTIPLIER=1.1

# Priority fee settings
MAX_PRIORITY_FEE=2
BASE_FEE_MULTIPLIER=1.2

# Gas estimation with retries
GAS_ESTIMATION_RETRIES=3
GAS_ESTIMATION_BUFFER=1.15

# ============================================
# TRADING PARAMETERS
# ============================================
# Conservative settings for T2 micro performance
SLIPPAGE_TOLERANCE=0.8
MAX_PRICE_IMPACT=2.0
MIN_LIQUIDITY_USD=10000

# Position sizing
MAX_POSITION_SIZE=50
MIN_POSITION_SIZE=0.01
POSITION_SIZE_MULTIPLIER=0.5

# Risk management
MAX_DAILY_TRADES=100
MAX_CONCURRENT_TRADES=5
STOP_LOSS_PERCENTAGE=2.0

# ============================================
# PERFORMANCE OPTIMIZATION
# ============================================
# Scan intervals optimized for T2 micro CPU credits
PRICE_SCAN_INTERVAL=2000
OPPORTUNITY_SCAN_INTERVAL=3000
HEALTH_CHECK_INTERVAL=30000

# Concurrency limits for 1GB RAM
MAX_CONCURRENT_SCANS=10
MAX_CONCURRENT_REQUESTS=5
REQUEST_TIMEOUT=15000

# Cache settings
PRICE_CACHE_TTL=5000
OPPORTUNITY_CACHE_TTL=2000
TOKEN_CACHE_TTL=300000

# ============================================
# SECURITY CONFIGURATION
# ============================================
# JWT Authentication
JWT_SECRET=your_super_secure_jwt_secret_minimum_32_characters_long_please
JWT_EXPIRATION=24h

# Admin Panel Security
ADMIN_PASSWORD=your_very_secure_admin_password_here
ADMIN_SESSION_TIMEOUT=3600

# API Security
API_RATE_LIMIT=60
API_RATE_WINDOW=60000
API_MAX_REQUESTS_PER_IP=100

# CORS Settings
ALLOWED_ORIGINS=http://localhost:3000,https://your-domain.com
CORS_CREDENTIALS=true

# ============================================
# MONITORING AND LOGGING
# ============================================
# Logging configuration
ENABLE_LOGGING=true
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_LOG_INTERVAL=60000

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/api/health

# ============================================
# TELEGRAM ALERTS (Optional)
# ============================================
ENABLE_TELEGRAM_ALERTS=false
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# Alert thresholds
ALERT_MIN_PROFIT=0.01
ALERT_MAX_GAS_PRICE=50
ALERT_LOW_BALANCE=0.01

# ============================================
# DATABASE CONFIGURATION (Optional)
# ============================================
# SQLite for local storage (recommended for T2 micro)
DATABASE_TYPE=sqlite
DATABASE_PATH=./data/trading.db

# Or PostgreSQL (requires RDS - not free tier)
# DATABASE_URL=postgresql://username:password@localhost:5432/trading

# ============================================
# AWS SPECIFIC SETTINGS
# ============================================
# CloudWatch integration (optional)
ENABLE_CLOUDWATCH=false
CLOUDWATCH_REGION=us-east-1
CLOUDWATCH_LOG_GROUP=/aws/ec2/flash-loan-bot

# Instance metadata
AWS_INSTANCE_METADATA_URL=http://169.254.169.254/latest/meta-data

# S3 backup configuration (optional - requires S3 free tier)
ENABLE_S3_BACKUP=false
S3_BUCKET_NAME=your-backup-bucket-name
S3_BACKUP_INTERVAL=86400000

# ============================================
# DEVELOPMENT/TESTING
# ============================================
# Test mode settings
TEST_MODE=false
USE_TESTNET=false
SIMULATE_TRADES=false

# Mock data for testing
MOCK_PRICE_FEEDS=false
MOCK_TRADE_EXECUTION=false

# ============================================
# NOTIFICATIONS
# ============================================
# Email notifications (using AWS SES free tier)
ENABLE_EMAIL_ALERTS=false
EMAIL_FROM=noreply@your-domain.com
EMAIL_TO=admin@your-domain.com
AWS_SES_REGION=us-east-1

# ============================================
# BACKUP AND RECOVERY
# ============================================
# Automatic backup settings
ENABLE_AUTO_BACKUP=true
BACKUP_INTERVAL=86400000
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=./backups

# ============================================
# SSL/TLS CONFIGURATION
# ============================================
# SSL settings (for HTTPS with Let's Encrypt)
ENABLE_SSL=false
SSL_CERT_PATH=/etc/letsencrypt/live/your-domain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/your-domain.com/privkey.pem

# ============================================
# ADVANCED FEATURES
# ============================================
# MEV protection
ENABLE_MEV_PROTECTION=true
USE_PRIVATE_MEMPOOL=false

# Sandwich attack detection
ENABLE_SANDWICH_DETECTION=true
SANDWICH_DETECTION_THRESHOLD=0.02

# Front-running protection
ENABLE_FRONT_RUNNING_PROTECTION=true
COMMIT_REVEAL_SCHEME=false

# ============================================
# IMPORTANT NOTES FOR AWS EC2 T2 MICRO
# ============================================
# 
# 1. RESOURCE LIMITATIONS:
#    - 1 GB RAM: Keep total memory usage under 800MB
#    - CPU Credits: Monitor usage to avoid throttling
#    - 30GB Storage: Implement log rotation and cleanup
# 
# 2. PERFORMANCE OPTIMIZATION:
#    - Reduce scan intervals during low CPU credit periods
#    - Use efficient algorithms and caching
#    - Limit concurrent operations
# 
# 3. COST MONITORING:
#    - Stay within 750 hours/month free tier limit
#    - Monitor data transfer (15GB free per month)
#    - Use CloudWatch for cost alerts
# 
# 4. SCALING CONSIDERATIONS:
#    - Start with conservative settings
#    - Monitor performance metrics
#    - Scale to larger instances as needed
# 
# 5. BACKUP STRATEGY:
#    - Regular automated backups to S3 (free tier: 5GB)
#    - EBS snapshots for disaster recovery
#    - Keep local backups for quick recovery
#
# ============================================

# END OF CONFIGURATION FILE
# Remember to secure this file: chmod 600 .env.production
# Never commit sensitive values to version control!